(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{30:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(19),i=n.n(c),o=(n(30),n(24)),r=n(10),l=n(2),u=n.p+"static/media/logo.03b78ada.svg",p=n(3),d=n(8),j=n(21),m=n(0);function b(e){var t=e.email,n=e.onSignOut,a=e.onClose,s=e.onBurgerClick,c=e.isOpen,i=Object(p.h)(),o=Object(j.useMediaQuery)({maxWidth:425});return Object(m.jsxs)("header",{className:"header",children:[Object(m.jsx)("img",{src:u,className:"logo header__logo",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"}),"/"===i.pathname&&Object(m.jsxs)("div",{className:"header__logged",children:[Object(m.jsx)("p",{className:"header__text",children:t}),Object(m.jsx)("button",{className:"header__link",onClick:n,children:"\u0412\u044b\u0439\u0442\u0438"})]}),"/"===i.pathname&&o&&Object(m.jsx)("div",{className:"header__logged",children:Object(m.jsx)("button",{className:"burger-button",type:"button","aria-label":"Open",onClick:s})}),Object(m.jsx)(BurgerMenu,{isOpen:c,onClose:a,onSignOut:n,email:t}),"/signup"===i.pathname&&Object(m.jsx)(d.b,{to:"/signin",className:"header__link",children:"\u0412\u043e\u0439\u0442\u0438"}),"/signin"===i.pathname&&Object(m.jsx)(d.b,{to:"/signup",className:"header__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})}var h=s.a.createContext();function f(e){var t=e.card,n=e.onCardClick,a=e.onCardDelete,c=e.onCardLike,i=s.a.useContext(h),o=t.owner._id===i._id,r="trash element__trash ".concat(o&&"element__trash_active"),l=t.likes.some((function(e){return e._id===i._id})),u="heart element__heart ".concat(l?"heart_active":"");return Object(m.jsxs)("li",{className:"element",children:[Object(m.jsx)("div",{className:"element__image-wrapper",children:Object(m.jsx)("div",{className:"element__popup",onClick:function(){n(t)},children:Object(m.jsx)("img",{className:"element__image",alt:t.title,src:t.link})})}),Object(m.jsxs)("div",{className:"element__field",children:[Object(m.jsx)("h2",{className:"element__title",children:t.name}),Object(m.jsxs)("div",{className:"element__likes",children:[Object(m.jsx)("button",{type:"button","aria-label":"Like",className:u,onClick:function(){c(t)}}),Object(m.jsx)("span",{className:"element__likes-number",children:t.likes.length})]})]}),Object(m.jsx)("button",{type:"button",className:r,onClick:function(){a(t)},"aria-label":"Trash"})]})}function O(){return Object(m.jsx)("div",{className:"spinner"})}function _(e){var t=e.isLoading,n=e.cards,s=e.onEditAvatar,c=e.onEditProfile,i=e.onAddPlace,o=e.onConfirm,r=e.onCardClick,l=e.onCardLike,u=e.onCardDelete,p=Object(a.useContext)(h);return Object(m.jsx)("main",{className:"content",children:t?Object(m.jsx)(O,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("section",{className:"profile",children:[Object(m.jsxs)("div",{className:"profile__info",children:[Object(m.jsx)("div",{className:"profile__avatar",onClick:s,children:Object(m.jsx)("img",{src:p.avatar,className:"avatar",alt:"\u0430\u0432\u0430\u0442\u0430\u0440"})}),Object(m.jsxs)("div",{className:"profile__text",children:[Object(m.jsxs)("div",{className:"profile__name-wrapper",children:[Object(m.jsx)("h1",{className:"profile__name",children:p.name}),Object(m.jsx)("button",{className:"profile__btn-edit",onClick:c,type:"button","aria-label":"Edit"})]}),Object(m.jsx)("p",{className:"profile__job",children:p.about})]})]}),Object(m.jsx)("button",{className:"profile__btn-add",onClick:i,type:"button","aria-label":"Add"})]}),Object(m.jsx)("section",{className:"elements",children:Object(m.jsx)("ul",{className:"elements__list",children:n.map((function(e){return Object(m.jsx)(f,{card:e,onConfirm:o,onCardClick:r,onCardLike:l,onCardDelete:u},e._id)}))})})]})})}function g(){var e=(new Date).getFullYear();return Object(m.jsx)("footer",{className:"footer",children:Object(m.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",e," Mesto Russia"]})})}function x(e){var t=e.name,n=e.title,a=e.isOpen,s=e.onClose,c=e.onSubmit,i=e.children,o=e.btnName,r=a?"popup_opened":"";return Object(m.jsx)("section",{className:"popup popup_type_".concat(t," ").concat(r),onClick:function(e){e.target===e.currentTarget&&s()},children:Object(m.jsxs)("div",{className:"popup__container",children:[n&&Object(m.jsx)("h2",{className:"popup__title",children:n}),Object(m.jsx)("button",{type:"reset","aria-label":"Close",className:"popup__close popup__close_type_edit-profile",onClick:s}),Object(m.jsxs)("form",{noValidate:!0,className:"popup__form",name:"edit-form",onSubmit:c,action:"#",method:"post",children:[i,o&&Object(m.jsx)("button",{name:"submit",type:"submit",className:"popup__btn-submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:o})]})]})})}function v(e){var t=e.isOpen,n=e.onAddPlace,s=e.onClose,c=Object(a.useState)(""),i=Object(l.a)(c,2),o=i[0],r=i[1],u=Object(a.useState)(""),p=Object(l.a)(u,2),d=p[0],j=p[1];function b(e){"title"===e.target.name?r(e.target.value):"link"===e.target.name&&j(e.target.value)}return Object(a.useEffect)((function(){r(""),j("")}),[t]),Object(m.jsxs)(x,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-place",isOpen:t,onClose:s,onSubmit:function(e){e.preventDefault(),n({title:o,link:d})},btnName:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",children:[Object(m.jsxs)("label",{className:"popup__form-field",children:[Object(m.jsx)("input",{name:"title",id:"place-title",type:"text",className:"popup__input popup__input_type_place-title",value:o,onChange:b,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"30",pattern:"^[a-zA-Z\u0430-\u044f\u0451\u0410-\u042f\u04010-9]{3,29}$",autoComplete:"off"}),Object(m.jsx)("span",{className:"popup__error",id:"place-title-error",children:"\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 2 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})]}),Object(m.jsxs)("label",{className:"popup__form-field",children:[Object(m.jsx)("input",{name:"link",id:"place-link",type:"url",className:"popup__input popup__input_type_place-link",value:d,onChange:b,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,pattern:"^https?:\\/\\/.+\\.(jpg|jpeg|png|gif|bmp)(\\?.+)?$",autoComplete:"off"}),Object(m.jsx)("span",{className:"popup__error",id:"place-link-error",children:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430"})]})]})}function N(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateAvatar,c=Object(a.useRef)();return Object(a.useEffect)((function(){t&&(c.current.value="")}),[t]),Object(m.jsx)(x,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s(c.current.value)},btnName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:Object(m.jsxs)("label",{className:"popup__form-field",children:[Object(m.jsx)("input",{name:"link",id:"avatar-link",type:"url",className:"popup__input popup__input_type_avatar",ref:c,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,pattern:"^https?:\\/\\/.+\\.(jpg|jpeg|png|gif|bmp)(\\?.+)?$",autoComplete:"off"}),Object(m.jsx)("span",{className:"popup__error",id:"avatar-link-error",children:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430"})]})})}function C(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateUser,c=Object(a.useContext)(h),i=Object(a.useState)(""),o=Object(l.a)(i,2),r=o[0],u=o[1],p=Object(a.useState)(""),d=Object(l.a)(p,2),j=d[0],b=d[1];function f(e){"name"===e.target.name?u(e.target.value):"job"===e.target.name&&b(e.target.value)}return Object(a.useEffect)((function(){t&&(u(c.name),b(c.about))}),[c,t]),Object(m.jsxs)(x,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit-profile",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s({name:r,about:j})},btnName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(m.jsxs)("label",{className:"popup__form-field",children:[Object(m.jsx)("input",{name:"name",id:"name",type:"text",className:"popup__input popup__input_type_name",value:r,onChange:f,required:!0,minLength:"2",maxLength:"40",pattern:"^[a-zA-Z\u0430-\u044f\u0451\u0410-\u042f\u04010-9 -]{2,40}$",autoComplete:"off"}),Object(m.jsx)("span",{className:"popup__error",id:"name-error",children:"\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 2 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})]}),Object(m.jsxs)("label",{className:"popup__form-field",children:[Object(m.jsx)("input",{name:"job",id:"job",type:"text",className:"popup__input popup__input_type_job",value:j,onChange:f,required:!0,minLength:"2",maxLength:"200",pattern:"^[a-zA-Z\u0430-\u044f\u0451\u0410-\u042f\u04010-9 -]{2,200}$",autoComplete:"off"}),Object(m.jsx)("span",{className:"popup__error",id:"job-error",children:"\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 2 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})]})]})}function k(e){var t=e.card,n=e.onCardDelete,a=e.isOpen,s=e.onClose;return Object(m.jsx)(x,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirm",isOpen:a,onClose:s,onSubmit:function(e){e.preventDefault(),n(t)},btnName:"\u0414\u0430"})}function y(e){var t=e.card,n=e.onClose,s=Object(a.useState)(""),c=Object(l.a)(s,2),i=c[0],o=c[1],r=Object(a.useState)(""),u=Object(l.a)(r,2),p=u[0],d=u[1],j=t?"popup_opened":"";return Object(a.useEffect)((function(){t&&(o(t.link),d(t.name))}),[t]),Object(m.jsx)("section",{className:"popup popup_type_full-image ".concat(j),onClick:function(e){e.target===e.currentTarget&&n()},children:Object(m.jsxs)("div",{className:"popup__full-image-wrapper",children:[Object(m.jsxs)("figure",{className:"popup__figure",children:[Object(m.jsx)("img",{className:"popup__full-image",src:i,alt:p}),Object(m.jsx)("figcaption",{className:"popup__full-image-caption",children:p})]}),Object(m.jsx)("button",{type:"reset","aria-label":"Close",className:"popup__close popup__close_type_full-image",onClick:n})]})})}var w=n(22),S=n(23),E=new(function(){function e(t){Object(w.a)(this,e),this.url=t.baseUrl,this.headers=t.headers}return Object(S.a)(e,[{key:"_parseResponse",value:function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}},{key:"getUserInfo",value:function(){return fetch("".concat(this.url,"/users/me"),{headers:this.headers,credentials:"include"}).then(this._parseResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this.url,"/cards"),{headers:this.headers,credentials:"include"}).then(this._parseResponse)}},{key:"setUserInfo",value:function(e,t){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this.headers,credentials:"include",body:JSON.stringify({name:e,about:t})}).then(this._parseResponse)}},{key:"setNewAvatar",value:function(e){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this.headers,credentials:"include",body:JSON.stringify({avatar:e})}).then(this._parseResponse)}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this.headers,credentials:"include",body:JSON.stringify({name:e,link:t})}).then(this._parseResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this.headers,credentials:"include"}).then(this._parseResponse)}},{key:"toggleLike",value:function(e,t){return fetch("".concat(this.url,"/cards/").concat(e,"/likes"),{method:t?"DELETE":"PUT",headers:this.headers,credentials:"include"}).then(this._parseResponse)}}]),e}())({baseUrl:"".concat(document.location.protocol,"//api.kotezh.mesto.nomoredomains.monster"),headers:{"Content-Type":"application/json"}}),L=n.p+"static/media/edit-avatar.a086f758.svg";function D(e){var t=e.onLogin,n=Object(a.useState)(""),s=Object(l.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(""),r=Object(l.a)(o,2),u=r[0],p=r[1];function d(e){e.preventDefault(),"email"===e.target.name?i(e.target.value):"password"===e.target.name&&p(e.target.value)}return Object(m.jsx)("main",{className:"content",children:Object(m.jsx)("section",{className:"sign",children:Object(m.jsxs)("div",{className:"sign__container",children:[Object(m.jsx)("h2",{className:"sign__title",children:"\u0412\u0445\u043e\u0434"}),Object(m.jsxs)("form",{noValidate:!0,className:"sign__form",name:"sign-form",onSubmit:function(e){e.preventDefault(),c&&u&&(t(c,u),i(""),p(""))},action:"#",method:"post",children:[Object(m.jsxs)("label",{className:"sign__form-field",children:[Object(m.jsx)("input",{name:"email",placeholder:"Email",id:"email",type:"email",className:"sign__input",value:c,onChange:d,required:!0,minLength:"2",maxLength:"40",pattern:"^(\\w+([-.]\\w+)*@\\w+(\\.\\w{2,})+)$",autoComplete:"off"}),Object(m.jsx)("span",{className:"popup__error",id:"email-error",children:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email"})]}),Object(m.jsxs)("label",{className:"sign__form-field",children:[Object(m.jsx)("input",{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",id:"password",type:"password",className:"sign__input",value:u,onChange:d,required:!0,minLength:"2",maxLength:"200",pattern:"^.{2,}$",autoComplete:"off"}),Object(m.jsx)("span",{className:"popup__error",id:"password-error",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"})]}),Object(m.jsx)("button",{name:"submit",type:"submit",className:"sign__btn-submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})}function T(e){var t=e.onRegister,n=Object(a.useState)(""),s=Object(l.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(""),r=Object(l.a)(o,2),u=r[0],p=r[1];function j(e){e.preventDefault(),"email"===e.target.name?i(e.target.value):"password"===e.target.name&&p(e.target.value)}return Object(m.jsx)("main",{className:"content",children:Object(m.jsx)("section",{className:"sign",children:Object(m.jsxs)("div",{className:"sign__container",children:[Object(m.jsx)("h2",{className:"sign__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(m.jsxs)("form",{noValidate:!0,className:"sign__form",name:"sign-form",onSubmit:function(e){e.preventDefault(),t(c,u)},action:"#",method:"post",children:[Object(m.jsxs)("label",{className:"sign__form-field",children:[Object(m.jsx)("input",{name:"email",placeholder:"Email",id:"email",type:"email",className:"sign__input",value:c,onChange:j,required:!0,minLength:"2",maxLength:"40",pattern:"^(\\w+([-.]\\w+)*@\\w+(\\.\\w{2,})+)$",autoComplete:"off"}),Object(m.jsx)("span",{className:"popup__error",id:"email-error",children:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 email"})]}),Object(m.jsxs)("label",{className:"sign__form-field",children:[Object(m.jsx)("input",{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",id:"password",type:"password",className:"sign__input",value:u,onChange:j,required:!0,minLength:"2",maxLength:"200",pattern:"(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$",autoComplete:"off"}),Object(m.jsx)("span",{className:"popup__error",id:"password-error",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435: \u0421\u0442\u0440\u043e\u0447\u043d\u044b\u0435 \u0438 \u043f\u0440\u043e\u043f\u0438\u0441\u043d\u044b\u0435 \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b, \u0446\u0438\u0444\u0440\u044b, \u0441\u043f\u0435\u0446\u0441\u0438\u043c\u0432\u043e\u043b\u044b. \u041c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})]}),Object(m.jsx)("button",{name:"submit",type:"submit",className:"sign__btn-submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(m.jsx)("p",{className:"sign__form-link-wrapper",children:Object(m.jsx)(d.b,{to:"/signin",className:"sign__form-link header__link",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})})]})]})})})}var A=n(25);function P(e){var t=e.component,n=Object(A.a)(e,["component"]);return Object(m.jsx)(p.b,{children:n.loggedIn?Object(m.jsx)(t,Object(r.a)({},n)):Object(m.jsx)(p.a,{to:"/signin"})})}var U=n.p+"static/media/icon-success.1b6082f8.svg",R=n.p+"static/media/icon-error.df8eddf6.svg";function I(e){var t=e.isOpen,n=e.onClose,a=e.success;return Object(m.jsx)(x,{name:a?"tooltip-success":"tooltip-error",isOpen:t,onClose:n,children:Object(m.jsxs)("div",{className:"popup__tooltip",children:[Object(m.jsx)("img",{className:"popup__tooltip-icon",src:a?U:R,alt:"\u0418\u043a\u043e\u043d\u043a\u0430"}),Object(m.jsx)("p",{className:"popup__tooltip-text",children:a?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})})}var $="".concat(document.location.protocol,"//api.kotezh.mesto.nomoredomains.monster");function q(){var e=Object(a.useState)({_id:0,name:"",about:"",avatar:L}),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)([]),i=Object(l.a)(c,2),u=i[0],d=i[1],j=Object(a.useState)(null),f=Object(l.a)(j,2),O=f[0],x=f[1],w=Object(a.useState)(null),S=Object(l.a)(w,2),A=S[0],U=S[1],R=Object(a.useState)(!1),q=Object(l.a)(R,2),J=q[0],z=q[1],F=Object(a.useState)(!1),B=Object(l.a)(F,2),M=B[0],Z=B[1],V=Object(a.useState)(!1),H=Object(l.a)(V,2),W=H[0],G=H[1],Q=Object(a.useState)(!1),Y=Object(l.a)(Q,2),K=Y[0],X=Y[1],ee=Object(a.useState)(!1),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],se=Object(a.useState)(!1),ce=Object(l.a)(se,2),ie=ce[0],oe=ce[1],re=Object(a.useState)(!1),le=Object(l.a)(re,2),ue=le[0],pe=le[1],de=Object(a.useState)(!1),je=Object(l.a)(de,2),me=je[0],be=je[1],he=Object(a.useState)(""),fe=Object(l.a)(he,2),Oe=fe[0],_e=fe[1],ge=Object(p.g)();function xe(){Promise.all([E.getUserInfo(),E.getInitialCards()]).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];s(n.data),d(a.data),be(!1)})).catch((function(e){console.log(e)}))}function ve(e){27===e.keyCode&&Ne()}function Ne(){G(!1),z(!1),Z(!1),X(!1),x(null),ae(!1),oe(!1),document.removeEventListener("keydown",ve)}return Object(a.useEffect)((function(){be(!0),fetch("".concat($,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.ok)return e.json();throw 400===e.status?Error("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"):401===e.status?Error("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d"):Error(e)})).then((function(e){e.data.email&&(_e(e.data.email),xe(),ge.push("/"))})).catch((function(e){console.log(e)}))}),[ge]),Object(m.jsx)(h.Provider,{value:n,children:Object(m.jsx)("div",{className:"page",children:Object(m.jsxs)("div",{className:"page__container",children:[Object(m.jsx)(b,{email:Oe,onBurgerClick:function(){oe(!0),document.addEventListener("keydown",ve)},onSignOut:function(){localStorage.removeItem("jwt"),_e(""),ge.push("/signin")},onClose:Ne,isOpen:ie}),Object(m.jsxs)(p.d,{children:[Object(m.jsx)(P,{exact:!0,path:"/",component:_,onEditAvatar:function(){G(!0),document.addEventListener("keydown",ve)},onEditProfile:function(){z(!0),document.addEventListener("keydown",ve)},onAddPlace:function(){Z(!0),document.addEventListener("keydown",ve)},onCardClick:function(e){x(e),document.addEventListener("keydown",ve)},onClose:Ne,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===n._id}));E.toggleLike(e._id,t).then((function(t){d((function(n){return n.map((function(n){return n._id===e._id?t.data:n}))}))})).catch((function(e){console.log(e)}))},onCardDelete:function(e){X(!0),U(e),document.addEventListener("keydown",ve)},cards:u,loggedIn:!!Oe,isLoading:me}),Object(m.jsx)(p.b,{path:"/signup",children:Object(m.jsx)(T,{onRegister:function(e,t){(function(e,t){return fetch("".concat($,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){if(e.ok)return e.json();throw 400===e.status?Error("\u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"):Error(e)}))})(e,t).then((function(){ge.push("/signin"),pe(!0)})).catch((function(e){console.log(e),pe(!1)})).finally((function(){ae(!0)}))}})}),Object(m.jsx)(p.b,{path:"/signin",children:Object(m.jsx)(D,{onLogin:function(e,t){(function(e,t){return fetch("".concat($,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})}).then((function(e){if(e.ok)return e.json();throw 400===e.status?Error("\u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"):401===e.status?Error("\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):Error(e)}))})(e,t).then((function(t){"ok"===t.token&&(_e(e),xe(),ge.push("/"))})).catch((function(e){return console.log(e)}))}})}),Object(m.jsx)(p.b,{path:"*",children:Object(m.jsx)(p.a,{to:"/signin"})})]}),Object(m.jsx)(g,{}),Object(m.jsx)(I,{onClose:Ne,isOpen:ne,success:ue}),Object(m.jsx)(y,{onClose:Ne,card:O}),Object(m.jsx)(C,{isOpen:J,onClose:Ne,onUpdateUser:function(e){E.setUserInfo(e.name,e.about).then((function(e){s(Object(r.a)(Object(r.a)({},n),{},{name:e.data.name,about:e.data.about})),z(!1)})).catch((function(e){console.log(e)}))}}),Object(m.jsx)(v,{isOpen:M,onClose:Ne,onAddPlace:function(e){E.addNewCard(e.title,e.link).then((function(e){d([e.data].concat(Object(o.a)(u))),Z(!1)})).catch((function(e){console.log(e)}))}}),Object(m.jsx)(N,{isOpen:W,onClose:Ne,onUpdateAvatar:function(e){E.setNewAvatar(e).then((function(e){s(Object(r.a)(Object(r.a)({},n),{},{avatar:e.data.avatar})),G(!1)})).catch((function(e){console.log(e)}))}}),Object(m.jsx)(k,{isOpen:K,onClose:Ne,card:A,onCardDelete:function(e){E.deleteCard(e._id).then((function(){d((function(t){return t.filter((function(t){return t._id!==e._id}))})),Ne()})).catch((function(e){console.log(e)}))}})]})})})}var J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))};i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(d.a,{children:Object(m.jsx)(q,{})})}),document.getElementById("root")),J()}},[[37,1,2]]]);
//# sourceMappingURL=main.1fd11516.chunk.js.map